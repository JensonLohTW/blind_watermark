# Project Overview

## 專案目的
blind_watermark 是一個 Python 函式庫，用於使用 DWT-DCT-SVD（離散小波轉換、離散餘弦轉換、奇異值分解）演算法在圖片中嵌入和提取不可見浮水印。該函式庫支援強健的浮水印技術，能夠在各種圖片攻擊（包括旋轉、裁切、縮放、亮度調整等）下存活。

## 專案架構
此專案採用前後端分離架構：
- **後端**: FastAPI + Python，提供浮水印嵌入/提取 API
- **前端**: Next.js 15.4 + React 19 + Tailwind CSS 4，提供使用者介面
- **核心演算法**: 位於 `backend/app/core/blind_watermark/`

## 技術棧

### 後端
- **語言**: Python 3.13+
- **框架**: FastAPI
- **核心依賴**:
  - numpy: 數值運算
  - opencv-python (cv2): 圖片處理
  - PyWavelets: 離散小波轉換
- **並行處理**: 透過 AutoPool 支援多處理、多執行緒和向量化
- **虛擬環境**: 使用 uv 管理，位於 `backend/.venv/`

### 前端
- **框架**: Next.js 15.4（嚴格版本要求）
- **UI 函式庫**: React 19（嚴格版本要求）
- **樣式**: Tailwind CSS 4（嚴格版本要求）
- **語言**: TypeScript（禁止 CommonJS）
- **套件管理**: npm/pnpm

### 開發工具
- **腳本管理**: 統一使用 `scripts/*.sh`
- **版本控制**: Git
- **CI/CD**: 透過腳本執行檢查與測試

## 關鍵特性
- 三種浮水印模式：'img'（圖片）、'str'（文字字串）、'bit'（位元陣列）
- 基於密碼的加密（雙層：浮水印層級和圖片層級）
- 對各種攻擊具有強健性：裁切、旋轉、縮放、亮度、雜訊
- 攻擊恢復工具用於參數估計
- YUV 色彩空間處理以提高浮水印存活率

## 專案規範
- 繁體中文文件與溝通
- 禁止使用 emoji
- 動態語言單檔 ≤ 200 行
- 每層資料夾檔案數 ≤ 8
- 程式碼可讀性第一
- 頻繁提交，每個里程碑完成後立即提交

## 目錄組織原則
- 根目錄保持極簡，只保留必要檔案
- 正式文件置於 `docs/`
- 討論/審查/方案置於 `discuss/`（如需要）
- 舊檔案歸檔至 `archive/`
- 日誌輸出至 `logs/`
